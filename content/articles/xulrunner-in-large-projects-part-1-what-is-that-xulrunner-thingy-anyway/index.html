---
categories:
- mozilla
- xul
date: "2010-07-02 01:25:02"
description: ""
slug: xulrunner-in-large-projects-part-1-what-is-that-xulrunner-thingy-anyway
title: 'XULRunner in large projects, part 1: What is that "XULRunner" thingy, anyway?'
---

<p>I applied to lead a session on <span class="caps">XULR</span>unner in large software projects at the <a href="https://wiki.mozilla.org/Summit2010">Mozilla Summit</a>. Unfortunately, that proposal was rejected, no talk for me at the summit. Yet there is apparently some interest in the topic, I got messages from two people who won&#8217;t be attending the summit asking for slides. I won&#8217;t create any slides but I decided to share my thoughts on the topics I wanted to discuss. Having spent the last three years building <span class="caps">XULR</span>unner-based applications (first TomTom <span class="caps">HOME</span>, now Songbird) I have some experience in this area. Still, this will be necessarily a one-sided view so don&#8217;t hesitate to comment.</p>

	<h4>So, what is that &#8220;<span class="caps">XULR</span>unner&#8221; thingy?</h4>

	<p>Mozilla has been investing much effort into creating the most powerful and flexible platform to build its applications upon (primarily Firefox and before it Mozilla Suite). This platform is usually referred to as &#8220;Gecko&#8221; or &#8220;Toolkit&#8221; and is among other things responsible for the unique extensibility of Firefox. And it is also fairly reusable: applications like <a href="http://www.mozillamessaging.com/en-US/thunderbird/">Thunderbird</a> or <a href="http://www.mozilla.org/projects/calendar/sunbird/">Sunbird</a> use the same platform as Firefox despite being very different. Yet using Gecko in your application was a fairly complicated affair back in 2005, there was a stand-alone version of it with Gecko Runtime Environment but you had to write C++ code and compile you application against it.</p>

	<p>There was much discussion about how to make reusing the Mozilla platform easier. The idea that won in the end was packing more code into the runtime, essentially everything required to run Firefox minus the Firefox user interface. New applications would only need to ship their user interface code and everything else would be provided by the runtime. With the user interface being primarily specified in <span class="caps">XUL</span> the new runtime got the name <span class="caps">XULR</span>unner. According to Wikipedia, applications could use <span class="caps">XULR</span>unner as their runtime starting with 2006&nbsp;&mdash; and many did.</p>

	<h4><span class="caps">XUL</span> and the flexible box model</h4>

	<p><span class="caps">XULR</span>unner allows creating complicated cross-platform applications in a very short time as <a href="http://www.glazman.org/weblog/dotclear/index.php?post/2009/06/22/Xulrunner-joys">demonstrated by Daniel Glazman</a> who created a full-featured Twitter client in a few weeks. An important factor here is <a href="https://developer.mozilla.org/en/XUL"><span class="caps">XUL</span></a>, the <span class="caps">XML</span>-based user interface language used. In some respects <span class="caps">XUL</span> is similar to <span class="caps">HTML</span>, in fact you can use <span class="caps">XHTML</span> in <span class="caps">XUL</span> documents. Still, being targeted at at user interfaces it uses the <a href="https://developer.mozilla.org/en/XUL_Tutorial/The_Box_Model">flexible box model</a> to position elements. As a result <span class="caps">XUL</span> elements can easily be made to occupy all available space both horizontally and vertically and to adjust automatically in the correct way when that space changes.</p>

	<p><em>Side note</em>: Mozilla also supports the flexible box model in <span class="caps">HTML</span> via <span class="caps">CSS</span> styles, there is even an effort to <a href="http://www.w3.org/TR/css3-flexbox/">standardize it</a>. However, the flexibility of <span class="caps">HTML</span> makes it rather awkward for designing user interfaces <span class="caps">IMHO</span>.</p>

	<p>The other advantage of <span class="caps">XUL</span> is the number of predefined widgets for the common tasks such as <a href="https://developer.mozilla.org/en/XUL/progressmeter">progressmeter</a> or <a href="https://developer.mozilla.org/en/XUL/toolbarbutton">toolbarbutton</a>. These widgets will usually have native appearance and same behavior on all supported operating systems, the developer doesn&#8217;t need to worry about details of the operating system the application runs on.</p>

	<p>There is another language called <a href="https://developer.mozilla.org/en/XBL"><span class="caps">XBL</span></a> that allows you to create your own reusable <span class="caps">XUL</span> widgets. These widgets can combine some already existing <span class="caps">XUL</span> tags, expose JavaScript properties and methods to other code and react to events dynamically. All in all, <span class="caps">XBL</span> is again a very powerful tool with the main disadvantage being: it takes some time to learn it.</p>

	<h4>Controlling presentation with <span class="caps">CSS</span></h4>

	<p><span class="caps">XUL</span> looks pretty good by default. However, occasionally some aspects of the presentation need to be adjusted, some applications even prefer their very own look to the native one, and the instrument of choice is <a href="https://developer.mozilla.org/en/css"><span class="caps">CSS</span></a> &mdash; same as for web pages. This is particularly appealing to people who have web development or web design experience. It also encourages separation of content and presentation, <span class="caps">XUL</span> has no equivalents of <span class="caps">HTML</span>&#8217;s &#8220;b&#8221; or &#8220;i&#8221; tags.</p>

	<h4>Making things move&nbsp;&mdash; with JavaScript</h4>

	<p>The &#8220;real programming&#8221;, e.g. making the user interface respond to user input, is usually done in <a href="https://developer.mozilla.org/en/JavaScript">JavaScript</a>. This is again something that particularly people with web development experience will value. Other people usually need some time to get used to some of the unusual concepts used. Still, as a high-level language JavaScript allows to write code that is both compact and easy to understand. Its performance improved drastically in the past few years and <a href="http://arewefastyet.com/">continues to improve</a>. And with the mechanism of <a href="https://developer.mozilla.org/en/JavaScript_code_modules">JavaScript code modules</a> it is ready for large applications.</p>

	<h4>Below the surface: <span class="caps">XPCOM</span></h4>

	<p>What I described above is merely the tip of the iceberg. The Mozilla platform is built on <a href="https://developer.mozilla.org/en/xpcom"><span class="caps">XPCOM</span></a>, the cross-platform variant of Microsoft&#8217;s <a href="http://en.wikipedia.org/wiki/Component_Object_Model" title="Component Object Model"><span class="caps">COM</span></a>. <span class="caps">XULR</span>unner includes hundreds of different <span class="caps">XPCOM</span> components providing <a href="http://www.oxymoronical.com/experiments/apidocs/">various interfaces</a>. There are components responsible for networking functions (network protocol implementations, <span class="caps">DNS</span> service etc.), for file system access (file reading/writing, directory service etc.), preferences, application update and much more. Most of these components can be accessed and used from JavaScript code and often make writing own code unnecessary. A <span class="caps">XULR</span>unner application can come with own <span class="caps">XPCOM</span> components that can be written in either JavaScript or C++. The latter is particularly useful to implement low-level capabilities that the platform doesn&#8217;t provide yet.</p>

	<h4>What about the downsides?</h4>

	<p>The above sounds much like an advertising pitch. In fact, when you first look at <span class="caps">XULR</span>unner it seems to be a great platform (it certainly is) without real downsides other than the requirement to learn a new interesting technology. Unfortunately, when you use <span class="caps">XULR</span>unner in a large project over a longer time you have to deal with the details and things stop being so rosy. So details are what I want to discuss in the following blog posts. So far I have as topics: platform quirks, platform bugs/updates, localization, recruiting, application updates/security (not necessarily in that order).</p>