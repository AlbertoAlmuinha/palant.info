---
categories:
- mozilla
- security
date: "2011-11-15 08:47:35"
description: ""
slug: google-chrome-and-pre-installed-web-apps
title: Google Chrome and pre-installed web apps
---

<p>Google recently launched a redesigned version of its Web Store where one can install extensions and web apps. One particular feature caught my attention: it marks the extensions that you already have with a check mark. How does the web page know which extensions you have installed?</p>

	<p>Turns out the answer is simple. The Web Store is a pre-installed web app (actually, it is even hardcoded into the browser). Web apps in Chrome can have special privileges if they request them, same as extensions. A look at the <code>Preferences</code> file shows the privileges of the Web Store app: <a href="http://code.google.com/chrome/extensions/management.html">management <span class="caps">API</span></a> and <code>webstorePrivate</code> <span class="caps">API</span>. The former allows querying your installed extensions which explains how the website learns about them. But it can do more: enable or disable extensions and even uninstall them without any kind of visible notification.</p>

	<p>The <code>webstorePrivate</code> <span class="caps">API</span> is (as its name already says) meant for the Web Store only. It isn&#8217;t documented online but you can find the documentation if you search in the <code>chrome.dll</code> file. It is apparently the Chrome equivalent of Gecko&#8217;s <a href="https://developer.mozilla.org/en/Installing_Extensions_and_Themes_From_Web_Pages">InstallTrigger</a>, with the difference that Firefox makes <code>InstallTrigger</code> available to all websites. But its functionality goes beyond that. First of all there is a method <code>silentlyInstall()</code>, the documentation claims that only some extensions can be installed this way however. The list can be found in <a href="http://codesearch.google.com/#OAMlx_jo-ck/src/chrome/browser/extensions/extension_webstore_private_api.cc&amp;l=81">extension_webstore_private_api.cc file in the Chrome source code</a>. Apparently, the trusted extensions are currently <a href="https://chrome.google.com/webstore/detail/jgoepmocgafhnchmokaimcmlojpnlkhp">Google +1 Button</a> and <a href="https://chrome.google.com/webstore/detail/boemmnepglcoinjcdlfcpcbmhiecichi">Google+ Notifications</a>. There are 6 more extension IDs on the list which are currently unused (but Google could add these extensions to the Web Store at any time).</p>

	<p>If you use Sync in Google Chrome then Web Store already knows you&nbsp;&mdash; thanks to method <code>getBrowserLogin()</code>. And if you don&#8217;t, the method pair <code>setStoreLogin()</code> / <code>getStoreLogin()</code> makes sure that the store never forgets you even if you remove your cookies.</p>

	<p>So much about the Web Store web app. But from my <code>Preferences</code> file I learned that I have more web apps that I never installed. YouTube? Gmail? Where did these come from? Turns out, these web apps had some help getting their top popularity in the Web Store. My Google Chrome installations (at least Chrome 16 and Chrome 17, not Chrome 15 for some reason) have a file <code>default_apps/external_extensions.json</code> where these apps are defined. Removing this file seems to be the only way to get rid of these apps but it will come back on the next Chrome update of course.</p>

	<p>Obviously, the point here isn&#8217;t really cheating with the popularity ranking of the own web apps (though maybe it is, to some degree). The installed web apps are featured prominently on the new tab page which is likely what this is mostly about. After all, this page is advertising space (the <code>ntp</code> entry in the <code>Preferences</code> file tells me that there was an advertising campaign for Chromebook running on this page until November 8th but I have zero views&nbsp;&mdash; somehow I missed it). And another nice side-effect: Gmail automatically gets the <a href="http://code.google.com/chrome/extensions/notifications.html">notification permission</a> and can display desktop notifications without asking the user for permission. Bad luck for all the other webmail services out there.</p>

	<p>Don&#8217;t get me wrong: Google Chrome is a great browser and it is easy to get excited about it, argue about benchmarks, brand-new standards and such. But sometimes you get a reminder: this is a Google product and it has to benefit Google. It isn&#8217;t merely about making the web better, it is also about promoting Google products and giving them an advantage over competing services. Google may <a href="http://www.google.com/help/netneutrality_letter.html">speak out for net neutrality</a> but with their browser the own services get prioritized. Even if it requires violating your privacy.</p>