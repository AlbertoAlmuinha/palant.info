---
categories:
- mozilla
- security
date: "2006-12-03 23:19:19"
description: ""
slug: no-good-deed-goes-unpunished
title: No good deed goes unpunished
---

<p><em>Disclaimer</em>: I don&#8217;t blame people working on <span class="caps">AMO</span> for anything. They face extremely difficult problems and are working very hard. I am simply noting some areas where they still have a long way to go.</p>

	<p>I started a little experiment&nbsp;&mdash; downloaded all extensions from addons.mozilla.org (<span class="caps">AMO</span>), unpacked them and tried to find security holes by searching for specific strings. As expected, it wasn&#8217;t all too difficult, one can easily find a dozen vulnerable extensions in an hour, and that not even accounting for the fact that there is a certain unpopular class of extensions on <span class="caps">AMO</span> all sharing the same buggy code. The only reason I didn&#8217;t hit all too many high profile extensions was that I was going through the extensions in alphabetical order instead of going by popularity.</p>

	<p>And because I was already at it, I decided to file some bugs in the <span class="caps">AMO</span> / Add-ons component, after all that component is meant for serious bugs in extensions that require AMO&#8217;s attention, right? I didn&#8217;t do this for extensions using wrappedJSObject without knowing what it does (usually this should only give web pages a chance to break the extension but nothing more). However, I found some cases where an extension made you vulnerable to the point that every time you visit a web page you risk getting your computer &#8220;owned&#8221; by it. And there were some of the less critical cases where the extension would communicate with its server and receive some JavaScript (typically <span class="caps">JSON</span>) as a response which it would then execute.</p>

	<p>Of course, everybody has two jobs, a family with five children and still has to find time to walk the dog. So it wasn&#8217;t exactly unexpected that I had to contact the extension authors myself. But what surprised me then was the suggestion not to create bugs on the issues and contact the authors directly because it was &#8220;only JSON&#8221;. These uncritical issues supposedly aren&#8217;t AMO&#8217;s concern and only increase the noise on Bugzilla. Yet I tend to treat all security bugs seriously, even the ones that are less likely to be exploited, and so far everybody from Mozilla seemed to agree with me on that. Consequently security issues need a bug to track their progress, to me that is somehow obvious. Add to that the fact that most extensions don&#8217;t have a bug database that can be used for that, and even if they do, there is usually no way to mark the bug &#8220;security sensitive&#8221;.</p>

	<p>I honestly don&#8217;t like the fact that somebody at <span class="caps">AMO</span> is taking security lightly. Granted, the user already installed the extension, so why should he care that it will run code from the author&#8217;s site? But then, he didn&#8217;t necessarily trust its author&nbsp;&mdash; he trusted <span class="caps">AMO</span>, the very official Mozilla site for extensions. The extension has been reviewed and published, there can&#8217;t possibly be anything wrong with it, right? And even if the user trusts the extension&#8217;s author, does he have to trust his web server administration skills as well? If his web server is ever hacked and the extension executes <span class="caps">JSON</span> code from the server without checking it first, then every computer with this extension installed might get infected with spyware or become a spam bot or just about anything else.</p>

	<p>Dealing with user&#8217;s trust is a problem that <span class="caps">AMO</span> still has to face. People come to <span class="caps">AMO</span> bringing lots of trust, trust that Firefox has earned. And in return they get extensions most of which are of far lower quality than Firefox itself. My little experiment proved the point: a large percentage of extensions on <span class="caps">AMO</span> is buggy to the extent of exposing users to security threats. Of course, once Remora goes online there will be &#8220;reliable&#8221; and &#8220;experimental&#8221; extensions, and the quality of the former should be better. Yet segmenting extensions by user reviews isn&#8217;t a silver bullet, these rarely are objective and well-informed. <span class="caps">AMO</span> could display warning texts in big red letters telling that whatever an extension breaks is only extension author&#8217;s fault and neither <span class="caps">AMO</span> nor Firefox did something wrong&nbsp;&mdash; but then again, shutting down <span class="caps">AMO</span> will work even better. Then at least the users will certainly notice that they are installing from an untrusted site. In the end, I doubt there is any real alternative to a code review. It won&#8217;t have to be thorough but catching at least the most common problems like unnecessary use of eval() is a <span class="caps">MUST</span>.</p>

	<p>We&#8217;ll see how it goes. I for my part am waiting for Remora before I do something with <span class="caps">AMO</span> again. I will probably continue my experiment since I need to find more security holes to understand what the most common problems are and how they should be detected. But I won&#8217;t report the issues any more, it doesn&#8217;t seem to be worth my time. I hope I managed to raise a little bit the awareness of the magnitude of problems <span class="caps">AMO</span> has to deal with. And I also hope that I proved another point as well&nbsp;&mdash; a central repository with the source code of all extensions hosted on <span class="caps">AMO</span> would be a huge gain. Not only because this way it is easier to search for problems that are likely to occur in many extensions. Gecko developers have a hard time finding out whether a certain feature is used in extensions and if it is&nbsp;&mdash; how often and in which ways. And the extension authors themselves need a way to find code examples easily to learn from each other (that, unfortunately, always includes wrong things as well but that&#8217;s just how it is). Anyway, after Remora launches I will be there again annoying people with my suggestions&#8230;</p>