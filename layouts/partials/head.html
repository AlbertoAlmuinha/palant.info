<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {{ .Scratch.Set "rss" (.AlternativeOutputFormats.Get "RSS") -}}
  {{ if not (.Scratch.Get "rss") -}}
    {{ .Scratch.Set "rss" ((.Site.GetPage "section" .Section).OutputFormats.Get "RSS") -}}
  {{ end -}}
  {{ with .Scratch.Get "rss" -}}
    <link rel="alternate" type="application/rss+xml" title="RSS feed" href="{{ .Permalink }}" />
  {{ end -}}
  {{ .Scratch.Set "svg" ((resources.Get "images/combined.svg") | minify | fingerprint "md5").Permalink -}}
  {{ .Scratch.Set "css" ((resources.Get "css/style.css") | resources.ExecuteAsTemplate "style.css" . | minify | fingerprint "md5").Permalink -}}
  {{ $scripts := slice (resources.Get "js/lunr.js") (resources.Get "js/lunr-init.js") (resources.Get "js/comments.js") }}
  {{ .Scratch.Set "js" ($scripts | resources.Concat "js/site.js"  | minify | fingerprint "md5").Permalink -}}
  <title>{{ .Title }}</title>

  <link rel="stylesheet" href="{{ .Scratch.Get "css" }}">
  <script src="{{ .Scratch.Get "js" }}" async></script>

  {{ hugo.Generator }}

  {{ with .Title -}}
    <meta property="og:title" content="{{ . }}">
  {{ end -}}

  {{ with .Description -}}
    <meta name="description" content="{{ . }}">
    <meta property="og:description" content="{{ . }}">
  {{ end -}}

  {{ with .Params.image -}}
    <meta name="og:image" content="{{ ($.Resources.GetMatch .).Permalink }}">
  {{ end -}}

  {{ with .Permalink -}}
    <link rel="canonical" href="{{ . }}">
    <meta property="og:url" content="{{ . }}">
  {{ end -}}

  <meta name="author" content="{{ with .Params.author }}{{ . }}{{ else }}{{ .Site.Author.name }}{{ end }}" />

  <meta property="og:locale" content="{{ .Site.LanguageCode }}">
  {{ if eq .Kind "page" -}}
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="{{.PublishDate.UTC.Format "2006-01-02T15:04:05Z" }}">
    <meta property="article:modified_time" content="{{.Lastmod.UTC.Format "2006-01-02T15:04:05Z" }}">
    {{ range .Params.categories -}}
      <meta property="article:tag" content="{{ . }}">
    {{ end -}}
  {{ else -}}
    <meta property="og:type" content="website">
  {{ end -}}
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:updated_time" content="{{ if .IsHome }}{{.Site.LastChange.UTC.Format "2006-01-02T15:04:05Z" }}{{ else }}{{.Lastmod.UTC.Format "2006-01-02T15:04:05Z" }}{{ end }}">

  <meta name="twitter:card" content="{{ if .Params.image }}summary_large_image{{ else }}summary{{ end }}">

  {{ with .Site.Params.AuthorTwitter -}}
    <meta name="twitter:site" content="{{ . }}">
    <meta name="twitter:creator" content="{{ . }}">
  {{ end -}}
</head>
